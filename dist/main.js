(()=>{"use strict";let e=[];class t{constructor(e,t,n,o){this.date=e,this.name=t,this.insight=n,this.movieId=o}}function n(t){const n=document.querySelector(".comment-records");n.innerHTML="";const o=e.filter((e=>e.movieId===t));for(let e=0;e<o.length;e+=1){const t=o[e],c=document.createElement("p");c.className="new-record",c.textContent=`${t.date} ${t.name}: ${t.insight}`,n.appendChild(c)}}function o(e,t){const n=document.createElement("div");n.classList.add("search-result");const o=document.createElement("img");o.src=t.image?t.image.medium:t.show.image?t.show.image.medium:"./img/placeholder.jpg",o.alt="Poster",o.id="poster";const a=document.createElement("h3");a.textContent=t.name||t.show.name||"Title N/A",a.classList.add("title"),a.id="title";const s=document.createElement("img");s.src="./img/like.png",s.alt="Like";const m=document.createElement("div");m.textContent="Like";const l=document.createElement("div");l.textContent="3 likes",l.classList.add("likesCounter");const r=document.createElement("button");r.textContent="Comment",r.classList.add("comment");const d=document.createElement("button");d.textContent="Reservations",d.classList.add("reservation");const i=document.createElement("div");i.classList.add("search-result-poster"),i.appendChild(o);const u=document.createElement("div");u.classList.add("search-result-name"),u.appendChild(a);const h=document.createElement("div");h.classList.add("reaction-action");const p=document.createElement("div");p.classList.add("likes"),p.appendChild(s),p.appendChild(m);const g=document.createElement("div");g.classList.add("reaction"),g.appendChild(p),g.appendChild(l);const v=document.createElement("div");v.classList.add("actions"),v.appendChild(r),v.appendChild(d),h.appendChild(g),h.appendChild(v),n.appendChild(i),n.appendChild(u),n.appendChild(h),i.addEventListener("click",(()=>{e.style.alignItems="normal",e.innerHTML="",c(e,t)})),r.addEventListener("click",(()=>{e.style.alignItems="normal",e.innerHTML="",c(e,t),document.querySelector(".addNewCommentBtn").style.display="none",document.querySelector(".comment-form").classList.toggle("active")})),e.appendChild(n)}function c(o,c){const a=function(){const e=document.createElement("div");e.className="comment-log-section";const t=document.createElement("h2");t.className="comment-header",t.textContent="Comments";const n=document.createElement("div");return n.className="comment-records",e.appendChild(t),e.appendChild(n),e}(),s=function(){const e=document.createElement("form");e.action="",e.className="comment-form";const t=document.createElement("label");t.textContent="Date",t.for="comment-date";const n=document.createElement("input");n.style.display="none",n.type="text",n.id="comment-date";const o=new Date,c=o.getDate(),a=o.getMonth()+1,s=o.getFullYear(),m=`${c.toString().padStart(2,"0")}/${a.toString().padStart(2,"0")}/${s}`;n.value=m;const l=document.createElement("label");l.htmlFor="comment-username",l.className="comment-username",l.textContent="Name";const r=document.createElement("input");r.type="text",r.id="comment-username",r.placeholder="Your name",r.required=!0;const d=document.createElement("label");d.htmlFor="comment-insights",d.className="comment-insights",d.textContent="Insights";const i=document.createElement("textarea");i.id="comment-insights",i.placeholder="Your insights",i.rows="6",i.required=!0;const u=document.createElement("button");u.type="submit",u.className="submit-comment",u.textContent="Comment";const h=[n,l,r,d,i,u];for(let t=0;t<h.length;t+=1)e.appendChild(h[t]);return e}(),m=document.createElement("div");m.className="full-details";const l=document.createElement("div");l.className="image-card";const r=document.createElement("img");r.src=c.image?c.image.medium:c.show.image?c.show.image.medium:"./img/placeholder.jpg",r.alt="show poster";const d=document.createElement("div");d.className="show-info";const i=document.createElement("h1");i.className="showId",i.style.display="none",i.textContent=c.id||c.show.id;const u=document.createElement("h1");u.className="showTitle",u.textContent=c.name||c.show.name;const h=document.createElement("h3");h.className="year",h.textContent=`Ended: ${c.ended||c.show.ended||"N/A"}`;const p=document.createElement("h3");p.className="genre",p.textContent=c.genres?c.genres.join(", "):c.show.genres?c.show.genres.join(", "):"Genres N/A";const g=document.createElement("h3");g.className="language",g.textContent=`Language: ${c.language||c.show.language||"N/A"}`;const v=document.createElement("h3");v.className="rating",v.textContent=c.rating?.average?`Rating: ${c.rating.average}/10`:c.show.rating?.average?`Rating: ${c.show.rating.average}/10`:"Rating: N/A";const E=document.createElement("div");E.className="show-summary";const C=document.createElement("h2");C.className="plot",C.textContent="Plot Summary";const y=document.createElement("div");y.className="summary",y.innerHTML=c.summary||c.show.summary||"Summary N/A";const f=document.createElement("button");f.type="submit",f.className="addNewCommentBtn",f.textContent="New Comment",E.appendChild(C),E.appendChild(y);const w=[i,u,h,p,g,v,E];for(let e=0;e<w.length;e+=1)d.appendChild(w[e]);l.appendChild(r),l.appendChild(d),m.appendChild(l),m.appendChild(a),m.appendChild(f),m.appendChild(s),o.appendChild(m),function(){const t=JSON.parse(localStorage.getItem("commentStore"));e=t}(),n(document.querySelector(".showId").textContent),f.addEventListener("click",(()=>{f.style.display="none",s.style.display="flex"}));const L=document.querySelector(".comment-form");L.addEventListener("submit",(o=>{const c=document.querySelector("#comment-username"),a=document.querySelector("#comment-insights");console.log("clicked"),o.preventDefault(),function(){const o=document.querySelector("#comment-date").value,c=document.querySelector("#comment-username").value,a=document.querySelector("#comment-insights").value,s=document.querySelector(".showId").textContent,m=new t(o,c,a,s);e.push(m),n(s),localStorage.setItem("commentStore",JSON.stringify(e))}(),L.style.display="none",f.style.display="block",c.value="",a.value=""}))}async function a(){try{const e=await fetch("https://api.tvmaze.com/shows"),t=await e.json(),n=Math.floor(200*Math.random());return t.slice(n,n+20).forEach((e=>{o(content,e)})),t}catch(e){return console.log(e),e}}const s=document.querySelector(".hamburger"),m=document.querySelector(".nav-items"),l=document.querySelector(".search-button"),r=document.querySelectorAll("#tvshows"),d=document.querySelector("#home"),i=document.querySelector("#content");function u(){i.innerHTML=""}function h(){s.classList.remove("active"),m.classList.remove("active")}l.addEventListener("click",(e=>{e.preventDefault(),u(),async function(){try{const e=document.getElementById("search").value,t="https://api.tvmaze.com/";if(""!==e)return async function(e){const t=await e.json();return e.ok?(console.log(t),t.forEach((e=>{o(content,e)})),t):(console.log(t.Error),t.Error)}(await fetch(`${t}search/shows?q=${e}`));console.log("No search input provided.")}catch(e){return console.log(e),e}}()})),r.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault(),u(),async function(){try{console.log("Fetching TV shows...");const e=await fetch("https://api.tvmaze.com/shows"),t=await e.json();return t.forEach((e=>{o(content,e)})),t}catch(e){return console.log(e),e}}()})))),d.addEventListener("click",(e=>{e.preventDefault(),u(),a()}));const p=document.getElementsByClassName("nav-link");function g(e){for(let e=0;e<p.length;e+=1)p[e].classList.remove("active");e.target.classList.add("active")}a(),function(){for(let e=0;e<p.length;e+=1)p[e].addEventListener("click",g)}();const v=document.querySelector(".hamburger"),E=document.querySelectorAll(".nav-link");v.addEventListener("click",(function(){s.classList.toggle("active"),m.classList.toggle("active")})),E.forEach((e=>e.addEventListener("click",h))),window.addEventListener("click",(function(e){e.target.closest(".hamburger")||e.target.closest(".nav-items")||h()}))})();